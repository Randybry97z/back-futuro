{"version":3,"file":"dashboard.controller.js","names":["_models","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","generateLineDashboard","req","res","participanteId","questionIds","body","console","log","data","db","Answer","findAll","include","model","Question","attributes","where","participante_id","question_id","dataDashboard","length","push","parseInt","answer_value","status","json","dashboard","mensaje","success","error","exports"],"sources":["../../src/controllers/dashboard.controller.js"],"sourcesContent":["import db, { sequelize } from '../database/models';\r\n\r\nexport const generateLineDashboard = async ( req, res ) => {\r\n  try {\r\n    let { participanteId, questionIds } = req.body\r\n    console.log(\"--------\",participanteId, questionIds);\r\n    const data = await db.Answer.findAll({\r\n        include: [{ model: db.Question, attributes: ['form_id', 'question_text'] }],\r\n        attributes: ['answer_value', 'answer_createdAt'],\r\n        where: {participante_id: participanteId, question_id: questionIds},\r\n        });\r\n\r\n        let dataDashboard = [];\r\n        for ( let i = 0; i < data.length; i++ ){\r\n          dataDashboard.push(0);\r\n        }\r\n        for ( let i = 0; i < data.length; i++ ){\r\n          dataDashboard[parseInt(data[i].answer_value) - 1] ++ \r\n        }\r\n        console.log(dataDashboard)\r\n      res.status(200).json({ data, dashboard: dataDashboard, mensaje: 'OperaciÃ³n realizada con exito', success: true });\r\n  } catch (error) {\r\n    console.log(error)\r\n    res.status(400).json({ mensaje: 'Ocurrio un error al consultar los datos', success: false });\r\n  }\r\n}"],"mappings":"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"}