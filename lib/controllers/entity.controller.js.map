{"version":3,"file":"entity.controller.js","names":["_models","_interopRequireDefault","require","getEntities","req","res","data","db","Entity","findAll","attributes","exclude","status","json","mensaje","success","error","exports","createEntity","participante_id","entity_name","entity_city","entity_address","entity_representative_name","entity_representative_mail","entity_representative_phone","body","entity","create","getEntity","findByPk","params","id","updateEntity","update","where","entity_id","patchEntity","deleteEntity","destroy"],"sources":["../../src/controllers/entity.controller.js"],"sourcesContent":["import db from \"../database/models\";\r\n\r\nexport const getEntities = async (req, res) => {\r\n  try {\r\n    const data = await db.Entity.findAll({\r\n      attributes: { exclude: [\"participante_id\"] },\r\n    });\r\n    res\r\n      .status(200)\r\n      .json({ data, mensaje: \"Operación realizada con exito\", success: true });\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al consultar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const createEntity = async (req, res) => {\r\n  try {\r\n    const {\r\n        participante_id,\r\n        entity_name,\r\n        entity_city,\r\n        entity_address,\r\n        entity_representative_name,\r\n        entity_representative_mail,\r\n        entity_representative_phone\r\n    } = req.body;\r\n    const entity = await db.Entity.create({\r\n        participante_id,\r\n        entity_name,\r\n        entity_city,\r\n        entity_address,\r\n        entity_representative_name,\r\n        entity_representative_mail,\r\n        entity_representative_phone\r\n    });\r\n    if (entity) {\r\n      res\r\n        .status(201)\r\n        .json({\r\n          data: entity,\r\n          mensaje: \"Entidad creada con exito\",\r\n          success: true,\r\n        });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({\r\n          mensaje: \"Ocurrio un error al crear la entidad\",\r\n          success: false,\r\n        });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al crear la entidad\",\r\n        error: error,\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const getEntity = async (req, res) => {\r\n  try {\r\n    const entity = await db.Entity.findByPk(req.params.id, {\r\n      attributes: { exclude: [\"participante_id\"] },\r\n    });\r\n    if (entity) {\r\n      res\r\n        .status(200)\r\n        .json({\r\n          data: entity,\r\n          mensaje: \"Operación realizada con exito\",\r\n          success: true,\r\n        });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({ mensaje: \"entidad no encontrada\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        error,\r\n        mensaje: \"Ocurrio un error al consultar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const updateEntity = async (req, res) => {\r\n  try {\r\n    const entity = await db.Entity.update(req.body, {\r\n      where: { entity_id: req.params.id },\r\n    });\r\n    if (entity[0]) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"Entidad actualizada con exito\", success: true });\r\n    } else {\r\n      res.status(400).json({ mensaje: \"No existe la entidad\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al actualizar los datos\",\r\n        error,\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const patchEntity = async (req, res) => {\r\n  try {\r\n    const entity = await db.Entity.update(req.body, {\r\n      where: { entity_id: req.params.id },\r\n    });\r\n    if (entity[0]) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"Entidad actualizada con exito\", success: true });\r\n    } else {\r\n      res.status(400).json({ mensaje: \"No existe la entidad\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al actualizar los datos\",\r\n        error,\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const deleteEntity = async (req, res) => {\r\n  try {\r\n    const entity = await db.Entity.destroy({\r\n      where: { entity_id: req.params.id },\r\n    });\r\n    if (entity) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"entidad eliminada con exito\", success: true });\r\n    } else {\r\n      res.status(400).json({ mensaje: \"No existe la entidad\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al eliminar los datos\",\r\n        error,\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n"],"mappings":"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"}