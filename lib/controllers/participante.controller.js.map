{"version":3,"file":"participante.controller.js","names":["_models","_interopRequireDefault","require","getParticipantes","req","res","data","db","Participante","findAll","attributes","exclude","include","model","User","status","json","mensaje","success","error","exports","getParticipantesByUser","where","user_id","params","createParticipante","participante_name","participante_lastname","participante_second_surname","participante_birthday","participante_age","participante_mail","participante_phone","participante_code","participante_gender","participante_nationality","participante_language","participante_scholarship","body","participante","create","getParticipante","findByPk","id","Entity","InstitutionalizationHistory","updateParticipante","update","participante_id","deleteParticipante","destroy"],"sources":["../../src/controllers/participante.controller.js"],"sourcesContent":["import db from \"../database/models\";\r\n\r\nexport const getParticipantes = async (req, res) => {\r\n  try {\r\n    const data = await db.Participante.findAll({\r\n      attributes: { exclude: [\"participante_age\"] },\r\n      include: [{ model: db.User, attributes: [\"user_name\"] }],\r\n    });\r\n    res\r\n      .status(200)\r\n      .json({ data, mensaje: \"Operación realizada con exito\", success: true });\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al consultar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const getParticipantesByUser = async (req, res) => {\r\n  try {\r\n    const data = await db.Participante.findAll({\r\n      attributes: { exclude: [\"participante_age\"] },\r\n      include: [{ model: db.User, attributes: [\"user_name\"] }],\r\n      where: { user_id: req.params.user_id },\r\n    });\r\n    res\r\n      .status(200)\r\n      .json({ data, mensaje: \"Operación realizada con exito\", success: true });\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al consultar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const createParticipante = async (req, res) => {\r\n  try {\r\n    const {\r\n      participante_name,\r\n      participante_lastname,\r\n      participante_second_surname,\r\n      participante_birthday,\r\n      participante_age,\r\n      participante_mail,\r\n      participante_phone,\r\n      participante_code,\r\n      participante_gender,\r\n      participante_nationality,\r\n      participante_language,\r\n      participante_scholarship,\r\n      user_id,\r\n    } = req.body;\r\n    const participante = await db.Participante.create({\r\n      participante_name,\r\n      participante_lastname,\r\n      participante_second_surname,\r\n      participante_birthday,\r\n      participante_age,\r\n      participante_mail,\r\n      participante_phone,\r\n      participante_code,\r\n      participante_gender,\r\n      participante_nationality,\r\n      participante_language,\r\n      participante_scholarship,\r\n      user_id,\r\n    });\r\n    if (participante) {\r\n      res\r\n        .status(201)\r\n        .json({\r\n          data: participante,\r\n          mensaje: \"Participante agregado con exito\",\r\n          success: true,\r\n        });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({\r\n          mensaje: \"Ocurrio un error al crear el participante\",\r\n          success: false,\r\n        });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al crear el participante\",\r\n        error: error,\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const getParticipante = async (req, res) => {\r\n  try {\r\n    const participante = await db.Participante.findByPk(req.params.id, {\r\n      attributes: { exclude: [\"participante_age\"] },\r\n      include: [{ model: db.User, attributes: [\"user_name\"] }, {model: db.Entity}, {model: db.InstitutionalizationHistory}],\r\n    });\r\n    if (participante) {\r\n      res\r\n        .status(200)\r\n        .json({\r\n          data: participante,\r\n          mensaje: \"Operación realizada con exito\",\r\n          success: true,\r\n        });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({ mensaje: \"participante no encontrado\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al consultar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const updateParticipante = async (req, res) => {\r\n  try {\r\n    const participante = await db.Participante.update(req.body, {\r\n      where: { participante_id: req.params.id },\r\n    });\r\n    if (participante[0]) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"Usuario actualizado con exito\", success: true });\r\n    } else {\r\n      res.status(400).json({ mensaje: \"No existe el participante\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al actualizar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n\r\nexport const deleteParticipante = async (req, res) => {\r\n  try {\r\n    const participante = await db.Participante.destroy({\r\n      where: { participante_id: req.params.id },\r\n    });\r\n    if (participante) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"participante eliminado con exito\", success: true });\r\n    } else {\r\n      res.status(400).json({ mensaje: \"No existe el participante\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res\r\n      .status(400)\r\n      .json({\r\n        mensaje: \"Ocurrio un error al eliminar los datos\",\r\n        success: false,\r\n      });\r\n  }\r\n};\r\n"],"mappings":"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"}