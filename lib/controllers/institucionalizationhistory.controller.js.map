{"version":3,"file":"institucionalizationhistory.controller.js","names":["_models","_interopRequireDefault","require","getInstitutionalizationHistories","req","res","data","db","InstitutionalizationHistory","findAll","attributes","exclude","include","model","Participante","status","json","mensaje","success","error","exports","createInstitutionalizationHistory","participante_id","history_acommodation_time","history_previous_acommodation","history_previous_ethos","history_quantity_programs","history_nohome_state","history_assault_state","history_social_profile","history_problematic","history_entity","history_register_date","history_updown_date","history_updown_reason","body","institutionalization_history","create","getInstitutionalizationHistory","findByPk","params","id","updateInstitutionalizationHistory","update","where","history_id","deleteInstitutionalizationHistory","destroy"],"sources":["../../src/controllers/institucionalizationhistory.controller.js"],"sourcesContent":["import db from \"../database/models\";\r\n\r\nexport const getInstitutionalizationHistories = async (req, res) => {\r\n  try {\r\n    const data = await db.InstitutionalizationHistory.findAll({\r\n      attributes: { exclude: [\"history_createdAt\", \"history_updatedAt\"] },\r\n      include: [{ model: db.Participante, attributes: [\"participante_id\"] }],\r\n    });\r\n    res\r\n      .status(200)\r\n      .json({ data, mensaje: \"Operación realizada con exito\", success: true });\r\n  } catch (error) {\r\n    res.status(400).json({\r\n      mensaje: \"Ocurrio un error al consultar los datos\",\r\n      success: false,\r\n    });\r\n  }\r\n};\r\n\r\nexport const createInstitutionalizationHistory = async (req, res) => {\r\n  try {\r\n    const {\r\n      participante_id,\r\n      history_acommodation_time,\r\n      history_previous_acommodation,\r\n      history_previous_ethos,\r\n      history_quantity_programs,\r\n      history_nohome_state,\r\n      history_assault_state,\r\n      history_social_profile,\r\n      history_problematic,\r\n      history_entity,\r\n      history_register_date,\r\n      history_updown_date,\r\n      history_updown_reason,\r\n    } = req.body;\r\n    const institutionalization_history =\r\n      await db.InstitutionalizationHistory.create({\r\n        participante_id,\r\n        history_acommodation_time,\r\n        history_previous_acommodation,\r\n        history_previous_ethos,\r\n        history_quantity_programs,\r\n        history_nohome_state,\r\n        history_assault_state,\r\n        history_social_profile,\r\n        history_problematic,\r\n        history_entity,\r\n        history_register_date,\r\n        history_updown_date,\r\n        history_updown_reason,\r\n      });\r\n    if (institutionalization_history) {\r\n      res.status(201).json({\r\n        data: institutionalization_history,\r\n        mensaje: \"InstitutionalizationHistory agregado con exito\",\r\n        success: true,\r\n      });\r\n    } else {\r\n      res.status(400).json({\r\n        mensaje:\r\n          \"Ocurrio un error al crear la historia de institucionalización\",\r\n        success: false,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    res.status(400).json({\r\n      error,\r\n      mensaje: \"Ocurrio un error al crear la historia de institucionalización\",\r\n      success: false,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getInstitutionalizationHistory = async (req, res) => {\r\n  try {\r\n    const institutionalization_history =\r\n      await db.InstitutionalizationHistory.findByPk(req.params.id, {\r\n        attributes: { exclude: [\"history_createdAt\", \"history_updatedAt\"] },\r\n        include: [{ model: db.Participante, attributes: [\"participante_id\"] }],\r\n      });\r\n    if (institutionalization_history) {\r\n      res.status(200).json({\r\n        data: institutionalization_history,\r\n        mensaje: \"Operación realizada con exito\",\r\n        success: true,\r\n      });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({ mensaje: \"historia de institucionalización no encontrada\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res.status(400).json({\r\n      mensaje: \"Ocurrio un error al consultar los datos\",\r\n      success: false,\r\n    });\r\n  }\r\n};\r\n\r\nexport const updateInstitutionalizationHistory = async (req, res) => {\r\n  try {\r\n    const institutionalization_history = await db.InstitutionalizationHistory.update(req.body, {\r\n      where: { history_id: req.params.id },\r\n    });\r\n    if (institutionalization_history[0]) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"Usuario actualizado con exito\", success: true });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({ mensaje: \"No existe la historia de institucionalización\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res.status(400).json({\r\n      mensaje: \"Ocurrio un error al actualizar los datos\",\r\n      success: false,\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteInstitutionalizationHistory = async (req, res) => {\r\n  try {\r\n    const institutionalization_history = await db.InstitutionalizationHistory.destroy({\r\n      where: { history_id: req.params.id },\r\n    });\r\n    if (institutionalization_history) {\r\n      res\r\n        .status(200)\r\n        .json({ mensaje: \"historia de institucionalización eliminada con exito\", success: true });\r\n    } else {\r\n      res\r\n        .status(400)\r\n        .json({ mensaje: \"No existe la historia de institucionalización\", success: false });\r\n    }\r\n  } catch (error) {\r\n    res.status(400).json({\r\n      mensaje: \"Ocurrio un error al eliminar los datos\",\r\n      success: false,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"}