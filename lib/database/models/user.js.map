{"version":3,"file":"user.js","names":["bcrypt","require","Model","module","exports","sequelize","DataTypes","User","encryptPassword","password","salt","genSalt","hash","comparePassword","compare","associate","models","belongsTo","Role","foreignKey","allowNull","Company","hasMany","Form","Participante","init","user_id","primaryKey","type","INTEGER","autoIncrement","user_name","STRING","max","user_lastName","user_maternalLastName","user_mail","user_password","TEXT","user_avatar","user_birthday","DATE","user_verified","modelName","tableName","timestamps","paranoid","createdAt","updatedAt","deletedAt"],"sources":["../../../src/database/models/user.js"],"sourcesContent":["'use strict';\r\nconst bcrypt = require('bcryptjs');\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class User extends Model {\r\n    static async encryptPassword(password) {\r\n      const salt = await bcrypt.genSalt(10);\r\n      return bcrypt.hash(password, salt);\r\n    }\r\n    static async comparePassword(password, encryptPassword) {\r\n      return await bcrypt.compare(password, encryptPassword);\r\n    }\r\n    static associate(models) {\r\n      User.belongsTo(models.Role, {\r\n        foreignKey: 'role_id',\r\n        allowNull: false\r\n      });\r\n      User.belongsTo(models.Company, {\r\n        foreignKey: 'company_id',\r\n        allowNull: false\r\n      });\r\n      User.hasMany(models.Form, {\r\n        foreignKey: 'user_id'\r\n      });\r\n      User.hasMany(models.Participante, {\r\n        foreignKey: 'user_id'\r\n      });\r\n    }\r\n  }\r\n  User.init({\r\n    user_id: {\r\n      primaryKey: true,\r\n      type: DataTypes.INTEGER,\r\n      autoIncrement: true\r\n    },\r\n    user_name: {\r\n      type: DataTypes.STRING,\r\n      max: 150\r\n    },\r\n    user_lastName: {\r\n      type: DataTypes.STRING,\r\n      max: 150\r\n    },\r\n    user_maternalLastName: {\r\n      type: DataTypes.STRING,\r\n      max: 150\r\n    },\r\n    user_mail: {\r\n      type: DataTypes.STRING,\r\n      max: 150\r\n    },\r\n    user_password: DataTypes.TEXT,\r\n    user_avatar: DataTypes.TEXT,\r\n    user_birthday: DataTypes.DATE,\r\n    user_verified: DataTypes.INTEGER\r\n  }, {\r\n    sequelize,\r\n    modelName: 'User',\r\n    tableName: 'user',\r\n    timestamps: true,\r\n    paranoid: true,\r\n    createdAt: 'user_createdAt',\r\n    updatedAt: 'user_updatedAt',\r\n    deletedAt: 'user_deletedAt',\r\n  });\r\n  return User;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,MAAM,GAAGC,OAAO,CAAC,UAAU,CAAC;AAClC,MAAM;EACJC;AACF,CAAC,GAAGD,OAAO,CAAC,WAAW,CAAC;AACxBE,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASL,KAAK,CAAC;IACvB,aAAaM,eAAeA,CAACC,QAAQ,EAAE;MACrC,MAAMC,IAAI,GAAG,MAAMV,MAAM,CAACW,OAAO,CAAC,EAAE,CAAC;MACrC,OAAOX,MAAM,CAACY,IAAI,CAACH,QAAQ,EAAEC,IAAI,CAAC;IACpC;IACA,aAAaG,eAAeA,CAACJ,QAAQ,EAAED,eAAe,EAAE;MACtD,OAAO,MAAMR,MAAM,CAACc,OAAO,CAACL,QAAQ,EAAED,eAAe,CAAC;IACxD;IACA,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvBT,IAAI,CAACU,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAC1BC,UAAU,EAAE,SAAS;QACrBC,SAAS,EAAE;MACb,CAAC,CAAC;MACFb,IAAI,CAACU,SAAS,CAACD,MAAM,CAACK,OAAO,EAAE;QAC7BF,UAAU,EAAE,YAAY;QACxBC,SAAS,EAAE;MACb,CAAC,CAAC;MACFb,IAAI,CAACe,OAAO,CAACN,MAAM,CAACO,IAAI,EAAE;QACxBJ,UAAU,EAAE;MACd,CAAC,CAAC;MACFZ,IAAI,CAACe,OAAO,CAACN,MAAM,CAACQ,YAAY,EAAE;QAChCL,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;EACF;EACAZ,IAAI,CAACkB,IAAI,CAAC;IACRC,OAAO,EAAE;MACPC,UAAU,EAAE,IAAI;MAChBC,IAAI,EAAEtB,SAAS,CAACuB,OAAO;MACvBC,aAAa,EAAE;IACjB,CAAC;IACDC,SAAS,EAAE;MACTH,IAAI,EAAEtB,SAAS,CAAC0B,MAAM;MACtBC,GAAG,EAAE;IACP,CAAC;IACDC,aAAa,EAAE;MACbN,IAAI,EAAEtB,SAAS,CAAC0B,MAAM;MACtBC,GAAG,EAAE;IACP,CAAC;IACDE,qBAAqB,EAAE;MACrBP,IAAI,EAAEtB,SAAS,CAAC0B,MAAM;MACtBC,GAAG,EAAE;IACP,CAAC;IACDG,SAAS,EAAE;MACTR,IAAI,EAAEtB,SAAS,CAAC0B,MAAM;MACtBC,GAAG,EAAE;IACP,CAAC;IACDI,aAAa,EAAE/B,SAAS,CAACgC,IAAI;IAC7BC,WAAW,EAAEjC,SAAS,CAACgC,IAAI;IAC3BE,aAAa,EAAElC,SAAS,CAACmC,IAAI;IAC7BC,aAAa,EAAEpC,SAAS,CAACuB;EAC3B,CAAC,EAAE;IACDxB,SAAS;IACTsC,SAAS,EAAE,MAAM;IACjBC,SAAS,EAAE,MAAM;IACjBC,UAAU,EAAE,IAAI;IAChBC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,gBAAgB;IAC3BC,SAAS,EAAE,gBAAgB;IAC3BC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAO1C,IAAI;AACb,CAAC"}